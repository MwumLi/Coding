if(!Date.now)Date.now=function(){return(new Date).getTime()};(function(){"use strict";var e=["webkit","moz"];for(var t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"];window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(e){var t=Date.now();var n=Math.max(r+16,t);return setTimeout(function(){e(r=n)},n-t)};window.cancelAnimationFrame=clearTimeout}})();var snowFall=function(){function e(){var e={flakeCount:35,flakeColor:"transparent",flakeIndex:999999,minSize:1,maxSize:2,minSpeed:1,maxSpeed:5,round:false,shadow:false,collection:false,image:false,collectionHeight:40},t=[],n={},r=0,s=0,o=0,u=0,a=function(e,t){for(var n in t){if(e.hasOwnProperty(n)){e[n]=t[n]}}},f=function(t,n){return Math.round(t+Math.random()*(n-t))},l=function(e,t){for(var n in t){e.style[n]=t[n]+(n=="width"||n=="height"?"px":"")}},c=function(t,n,i){this.x=f(o,s-o);this.y=f(0,r);this.size=n;this.speed=i;this.step=0;this.stepSize=f(1,10)/100;if(e.collection){this.target=canvasCollection[f(0,canvasCollection.length-1)]}var u=null;if(e.image){u=new Image;u.src=e.image}else{u=document.createElement("div");l(u,{background:e.flakeColor});u.innerHTML="❄"}u.className="snowfall-flakes";l(u,{width:this.size,height:this.size,position:"absolute",top:this.y,left:this.x,fontSize:this.size,zIndex:e.flakeIndex,textShadow:"2px 2px 2px #AAA",color:"#FFF"});if(e.round){l(u,{"-moz-border-radius":~~e.maxSize+"px","-webkit-border-radius":~~e.maxSize+"px",borderRadius:~~e.maxSize+"px"})}if(e.shadow){l(u,{"-moz-box-shadow":"1px 1px 1px #555","-webkit-box-shadow":"1px 1px 1px #555",boxShadow:"1px 1px 1px #555"})}if(t.tagName===document.body.tagName){document.body.appendChild(u)}else{t.appendChild(u)}this.element=u;this.update=function(){this.y+=this.speed;if(this.y>r-(this.size+6)){this.reset()}this.element.style.top=this.y+"px";this.element.style.left=this.x+"px";this.step+=this.stepSize;this.x+=Math.cos(this.step);if(this.x+this.size>s-o||this.x<o){this.reset()}};this.reset=function(){this.y=0;this.x=f(o,s-o);this.stepSize=f(1,10)/100;this.size=f(e.minSize*100,e.maxSize*100)/100;this.element.style.width=this.size+"px";this.element.style.height=this.size+"px";this.speed=f(e.minSpeed,e.maxSpeed)}},h=function(){for(var e=0;e<t.length;e+=1){t[e].update()}u=requestAnimationFrame(function(){h()})};return{snow:function(u,l){a(e,l);n=u;r=n.offsetHeight;s=n.offsetWidth;n.snow=this;if(n.tagName.toLowerCase()==="body"){o=25}window.addEventListener("resize",function(){r=n.clientHeight;s=n.offsetWidth},true);for(i=0;i<e.flakeCount;i+=1){t.push(new c(n,f(e.minSize*100,e.maxSize*100)/100,f(e.minSpeed,e.maxSpeed)))}h()},clear:function(){var e=null;if(!n.getElementsByClassName){e=n.querySelectorAll(".snowfall-flakes")}else{e=n.getElementsByClassName("snowfall-flakes")}var t=e.length;while(t--){if(e[t].parentNode===n){n.removeChild(e[t])}}cancelAnimationFrame(u)}}}return{snow:function(t,n){if(typeof n=="string"){if(t.length>0){for(var r=0;r<t.length;r++){if(t[r].snow){t[r].snow.clear()}}}else{t.snow.clear()}}else{if(t.length>0){for(var r=0;r<t.length;r++){(new e).snow(t[r],n)}}else{(new e).snow(t,n)}}}}}();snowFall.snow(document.body,{minSize:10,maxSize:32})
